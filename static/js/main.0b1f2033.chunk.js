(this["webpackJsonpokrs-tracking"]=this["webpackJsonpokrs-tracking"]||[]).push([[0],{102:function(e,t,a){e.exports=a(140)},140:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(29),s=a.n(o),l=a(10),i=a(19),c=a(43),u=a(9),d=Object(i.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.payload.user;default:return e}},userName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_NAME":return t.payload.userName;default:return e}},objectives:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_OBJECTIVES":return t.payload.objectives;case"ADD_OBJECTIVE":return[].concat(Object(u.a)(e),[t.payload.objective]);case"UPDATE_OBJECTIVE":return[].concat(Object(u.a)(e.slice(0,t.payload.updatedIndex)),[t.payload.updatedObjective],Object(u.a)(e.slice(t.payload.updatedIndex+1)));case"DELETE_OBJECTIVE":return[].concat(Object(u.a)(e.slice(0,t.payload.deletedIndex)),Object(u.a)(e.slice(t.payload.deletedIndex+1)));default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING":return t.payload.loading;default:return e}},demoObjectives:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DEMO":return Object(u.a)(t.payload.objectives);case"ADD_DEMO":return[].concat(Object(u.a)(e),[t.payload.objective]);case"UPDATE_DEMO":return[].concat(Object(u.a)(e.slice(0,t.payload.updatedIndex)),[t.payload.updatedObjective],Object(u.a)(e.slice(t.payload.updatedIndex+1)));case"DELETE_DEMO":return[].concat(Object(u.a)(e.slice(0,t.payload.deletedIndex)),Object(u.a)(e.slice(t.payload.deletedIndex+1)));default:return e}}}),m=a(12),p=a(13),h=a(16),g=a(14),b=a(17),y=function(e){return{type:"SET_OBJECTIVES",payload:{objectives:e}}},E=function(e){return{type:"ADD_OBJECTIVE",payload:{objective:e}}},v=function(e,t){return{type:"UPDATE_OBJECTIVE",payload:{updatedIndex:e,updatedObjective:t}}},f=function(e){return{type:"DELETE_OBJECTIVE",payload:{deletedIndex:e}}},j=function(e){return{type:"SET_USER",payload:{user:e}}},O=function(e){return{type:"SET_USER_NAME",payload:{userName:e}}},k=function(e){return{type:"SET_LOADING",payload:{loading:e}}},R=function(e){return{type:"SET_DEMO",payload:{objectives:e}}},w=function(e){return{type:"ADD_DEMO",payload:{objective:e}}},C=function(e,t){return{type:"UPDATE_DEMO",payload:{updatedIndex:e,updatedObjective:t}}},S=function(e){return{type:"DELETE_DEMO",payload:{deletedIndex:e}}},L=a(162),D=a(23),P=a.n(D),M=(a(61),a(141),a(48),{apiKey:"AIzaSyC_nZbsQOVKYU3tZrJjPEBFh-Ag3oe04ME",authDomain:"okrs-tracking.firebaseapp.com",databaseURL:"https://okrs-tracking.firebaseio.com",projectId:"okrs-tracking",storageBucket:"okrs-tracking.appspot.com",messagingSenderId:"34999773725",appId:"1:34999773725:web:8c2b5f5c78c466a58eb4f4",measurementId:"G-G0DDNKV4WC"}),K=a(35),I=a(55),A=Object(l.b)((function(e){return{user:e.user}}))((function(e){var t=e.component,a=e.restricted,r=e.user,o=Object(I.a)(e,["component","restricted","user"]);return n.a.createElement(K.b,Object.assign({},o,{render:function(e){return r&&a?n.a.createElement(K.a,{to:"/dashboard"}):n.a.createElement(t,e)}}))})),x=Object(l.b)((function(e){return{user:e.user}}))((function(e){var t=e.component,a=e.user,r=Object(I.a)(e,["component","user"]);return n.a.createElement(K.b,Object.assign({},r,{render:function(e){return a?n.a.createElement(t,e):n.a.createElement(K.a,{to:"/"})}}))})),B=a(150),N=a(166),T={YANKEES_BLUE:"#161B40",PICTION_BLUE:"#43BEE5",FOLLY:"#F40058",ORANGE_WEB:"#EFA500",MEDIUM_SEA_GREEN:"#41B853"},U=a(170),_=a(169),F=a(168),z=a(171),H=a(152),G=a(153),J=a(154),V=a(148),q=a(164),W=a(165),Y=a(151),Z=a(45),Q="LOGIN",X=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={selectedTab:Q,errorMessage:"",loginLoading:!1,registerLoading:!1},a.onLoginFormSubmit=function(e){var t=e.value;a.setState({loginLoading:!0}),P.a.auth().signInWithEmailAndPassword(t.loginEmail,t.loginPassword).then((function(){a.setState({loginLoading:!1})})).catch((function(e){a.setState({loginLoading:!1,errorMessage:e.code}),console.log(e)}))},a.onRegisterFormSubmit=function(e){var t=e.value;a.props.setUserName(t.registerName),a.setState({registerLoading:!0}),P.a.auth().createUserWithEmailAndPassword(t.registerEmail,t.registerPassword).then((function(){a.setState({registerLoading:!1})})).catch((function(e){a.setState({registerLoading:!1,errorMessage:e.code}),console.log(e)}))},a.onSelectTab=function(e){a.setState({selectedTab:e,errorMessage:""})},a.validateConfirmPassword=function(e,t){if(e!==t.registerPassword)return"Password mismatch"},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState({selectedTab:this.props.selectedTab})}},{key:"renderLoginSpinner",value:function(){return this.state.loginLoading?n.a.createElement(Z.ClipLoader,{color:"white",size:10,loading:this.state.loginLoading}):null}},{key:"renderRegisterSpinner",value:function(){return this.state.registerLoading?n.a.createElement(Z.ClipLoader,{color:"white",size:10,loading:this.state.registerLoading}):null}},{key:"renderLoginForm",value:function(){return this.state.selectedTab===Q&&n.a.createElement(V.a,{onSubmit:this.onLoginFormSubmit},this.renderErrorMessage(),n.a.createElement(q.a,{type:"email",label:"Email",name:"loginEmail",required:!0}),n.a.createElement(q.a,{type:"password",label:"Password",name:"loginPassword",required:!0}),n.a.createElement(N.a,{margin:{top:"medium"},align:"end"},n.a.createElement(F.a,{type:"submit",label:"Submit",icon:this.renderLoginSpinner(),color:"white"})))}},{key:"renderRegisterForm",value:function(){return"REGISTER"===this.state.selectedTab&&n.a.createElement(V.a,{onSubmit:this.onRegisterFormSubmit},this.renderErrorMessage(),n.a.createElement(q.a,{name:"registerName",label:"Name",required:!0}),n.a.createElement(q.a,{type:"email",name:"registerEmail",label:"Email",required:!0}),n.a.createElement(q.a,{type:"password",name:"registerPassword",label:"Password",required:!0}),n.a.createElement(q.a,{type:"password",name:"registerConfirmPassword",label:"Confirm Password",validate:this.validateConfirmPassword,required:!0}),n.a.createElement(N.a,{margin:{top:"medium"},align:"end"},n.a.createElement(F.a,{type:"submit",label:"Submit",icon:this.renderRegisterSpinner(),color:"white"})))}},{key:"renderErrorMessage",value:function(){return 0!==this.state.errorMessage.length&&n.a.createElement(N.a,{background:"status-error",margin:{vertical:"small"},pad:"small"},n.a.createElement(U.a,null,this.state.errorMessage))}},{key:"renderTabs",value:function(){var e=this;return n.a.createElement(N.a,{direction:"row",justify:"center"},n.a.createElement(N.a,{margin:{right:"medium"},pad:"small",onClick:function(){return e.onSelectTab(Q)},hoverIndicator:!0},n.a.createElement(U.a,null,"Login")),n.a.createElement(N.a,{pad:"small",onClick:function(){return e.onSelectTab("REGISTER")},hoverIndicator:!0},n.a.createElement(U.a,null,"Register")))}},{key:"render",value:function(){return n.a.createElement(W.a,{margin:"xlarge",full:!0,onEsc:this.props.onModalClose,onClickOutside:this.props.onModalClose},n.a.createElement(N.a,{background:"layout-background",fill:!0},n.a.createElement(N.a,{direction:"row",margin:{top:"medium"}},n.a.createElement(N.a,{basis:"xlarge"},this.renderTabs()),n.a.createElement(N.a,{justify:"center",align:"center",margin:{right:"medium"},pad:{horizontal:"small"},onClick:this.props.onModalClose,hoverIndicator:!0},n.a.createElement(Y.a,null))),n.a.createElement(N.a,{margin:{top:"medium",horizontal:"xlarge"}},this.renderLoginForm(),this.renderRegisterForm())))}}]),t}(r.Component),$=Object(l.b)(null,(function(e){return Object(i.a)({setUserName:O},e)}))(X),ee=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={showModal:!1,selectedTab:Q},a.openAuthModal=function(e){a.setState({showModal:!0,selectedTab:e})},a.closeAuthModal=function(){a.setState({showModal:!1})},a.onLogout=function(){P.a.auth().signOut()},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"renderAuthModal",value:function(){return this.state.showModal&&n.a.createElement($,{selectedTab:this.state.selectedTab,onModalClose:this.closeAuthModal})}},{key:"renderUserName",value:function(){return n.a.createElement(U.a,{margin:{right:"medium"},weight:"bold"},this.props.user.displayName?this.props.user.displayName:this.props.userName)}},{key:"renderMenu",value:function(){return n.a.createElement(_.a,{dropBackground:"layout-background",icon:n.a.createElement(H.a,null),items:[{label:"Logout",onClick:this.onLogout}]})}},{key:"renderButton",value:function(){var e=this;return this.props.user?n.a.createElement(N.a,{direction:"row"},n.a.createElement(N.a,{justify:"center"},this.renderUserName()),n.a.createElement(N.a,{margin:{right:"medium"},justify:"center"},this.renderMenu())):n.a.createElement(N.a,{direction:"row"},n.a.createElement(F.a,{label:"Login",icon:n.a.createElement(G.a,null),color:"white",margin:{right:"small"},onClick:function(){return e.openAuthModal(Q)}}),n.a.createElement(F.a,{label:"Register",icon:n.a.createElement(J.a,null),color:"white",onClick:function(){return e.openAuthModal("REGISTER")}}))}},{key:"render",value:function(){return n.a.createElement(N.a,{direction:"row",fill:"horizontal",pad:{vertical:"xsmall"},elevation:"xsmall"},n.a.createElement(N.a,{basis:"3/4",justify:"center"},n.a.createElement(z.a,{margin:{left:"medium"},size:"small"},"OKRS-TRACKING")),n.a.createElement(N.a,{basis:"1/4",justify:"center",align:"end",margin:{right:"medium"}},this.renderButton()),this.renderAuthModal())}}]),t}(r.Component),te=Object(l.b)((function(e){return{user:e.user,userName:e.userName}}))(ee),ae=function(e){var t=e.children,a=T;return n.a.createElement(B.a.Extend,{value:{global:{colors:{"layout-background":a.YANKEES_BLUE,"card-background-1":a.FOLLY,"card-background-2":a.ORANGE_WEB,"card-background-3":a.MEDIUM_SEA_GREEN,"card-background-4":a.PICTION_BLUE}}}},n.a.createElement(N.a,{align:"center",background:"layout-background",height:{min:"xlarge"}},n.a.createElement(te,null),t))},re=a(172),ne=a(161),oe=a(155),se=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={cardBackground:"",mouseOverMore:!1},a.calculateCardColor=function(){return"card-background-".concat(a.props.objectiveIndex%4+1)},a.onCardClick=function(){a.state.mouseOverMore||a.props.onCardClick(a.props.objectiveIndex,a.props.objective)},a.onDelete=function(){a.props.demo?a.props.deleteDemo(a.props.objectiveIndex):(a.deleteRedux(),a.deleteFirestore())},a.deleteRedux=function(){a.props.deleteObjective(a.props.objectiveIndex)},a.deleteFirestore=function(){P.a.firestore().collection("userObjectives").doc(a.props.user.uid).collection("objectives").doc(a.props.objective.id).delete()},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState({cardBackground:this.calculateCardColor()})}},{key:"renderMore",value:function(){var e=this;return n.a.createElement(N.a,{direction:"row"},n.a.createElement(N.a,{basis:"3/4"}),n.a.createElement(N.a,{basis:"1/4",margin:{top:"small",right:"small"},onMouseOver:function(){return e.setState({mouseOverMore:!0})},onMouseLeave:function(){return e.setState({mouseOverMore:!1})}},n.a.createElement(_.a,{items:[{label:"Delete",onClick:this.onDelete}]},n.a.createElement(N.a,{align:"end"},n.a.createElement(oe.a,{color:"white"})))))}},{key:"renderContent",value:function(){return n.a.createElement(N.a,{pad:{horizontal:"medium",top:"medium",bottom:"large"}},n.a.createElement(z.a,{color:"white"},this.props.objective.label),n.a.createElement(ne.a,{values:[{value:this.props.objective.progress,label:"".concat(this.props.objective.progress," %")}]}))}},{key:"render",value:function(){return n.a.createElement(N.a,{direction:"column",basis:"medium",margin:"medium",elevation:"small",animation:"fadeIn",background:this.state.cardBackground,onClick:this.onCardClick,hoverIndicator:!0},this.renderMore(),this.renderContent())}}]),t}(r.Component),le=Object(l.b)((function(e){return{user:e.user}}),(function(e){return Object(i.a)({deleteObjective:f,deleteDemo:S},e)}))(se),ie=a(167),ce=a(160),ue=a(158),de=a(159),me=a(54),pe=a(156),he=a(157);function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(a),!0).forEach((function(t){Object(me.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ye=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={progressDetailList:[],progressDetailLabel:"",currentProgress:-1,addProgressDetail:!1,mouseOverBullet:!1,updateProgress:!1},a.onProgressChange=function(e){var t=""===e.target.value?0:parseInt(e.target.value);t>=0&&t<=100&&a.setState({currentProgress:t})},a.onAddClick=function(){a.state.addProgressDetail&&""!==a.state.progressDetailLabel&&a.handleProgressDetailList(),a.setState({addProgressDetail:!a.state.addProgressDetail})},a.onBulletClick=function(){-1===a.state.currentProgress&&a.setState({currentProgress:a.props.keyResult.progress}),a.state.updateProgress&&a.state.currentProgress!==a.props.keyResult.progress&&a.handleProgress(),a.setState({updateProgress:!a.state.updateProgress})},a.onProgressDetailEnter=function(e){"Enter"===e.key&&""!==a.state.progressDetailLabel&&a.handleProgressDetailList()},a.onProgressEnter=function(e){"Enter"===e.key&&a.state.currentProgress!==a.props.keyResult.progress&&a.handleProgress()},a.handleProgressDetailList=function(){var e={label:a.state.progressDetailLabel};a.setState({progressDetailList:[].concat(Object(u.a)(a.state.progressDetailList),[e]),progressDetailLabel:""});var t=be({},a.props.keyResult);t.progressDetailList=[].concat(Object(u.a)(a.state.progressDetailList),[e]),a.props.onKeyResultUpdate(a.props.keyResultIndex,t)},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState({progressDetailList:this.props.progressDetailList})}},{key:"handleProgress",value:function(){var e=be({},this.props.keyResult);e.progress=this.state.currentProgress,this.props.onKeyResultUpdate(this.props.keyResultIndex,e),this.setState({updateProgress:!1})}},{key:"renderAddButton",value:function(){return!this.state.updateProgress&&n.a.createElement(F.a,{margin:{vertical:"medium",horizontal:"xlarge"},label:n.a.createElement(U.a,{color:"white"},"Check in"),icon:n.a.createElement(pe.a,{color:"white"}),color:"white",onClick:this.onAddClick})}},{key:"renderProgressDetailInput",value:function(){var e=this;return this.state.addProgressDetail&&n.a.createElement(ie.a,{placeholder:"Progress Log",value:this.state.progressDetailLabel,onChange:function(t){return e.setState({progressDetailLabel:t.target.value})},onKeyDown:this.onProgressDetailEnter})}},{key:"renderProgressInput",value:function(e){return e===this.state.progressDetailList.length-1&&this.state.updateProgress&&n.a.createElement(N.a,{basis:"1/4",margin:{right:"small"}},n.a.createElement(ie.a,{placeholder:"Progress(%)",value:this.state.currentProgress,onChange:this.onProgressChange,onKeyDown:this.onProgressEnter}))}},{key:"renderProgressBullet",value:function(e){var t=this;return this.state.addProgressDetail||e!==this.state.progressDetailList.length-1?n.a.createElement(he.a,{color:"accent-1"}):n.a.createElement(he.a,{color:this.state.updateProgress?"accent-4":this.state.mouseOverBullet?"accent-4":"accent-1",onMouseOver:function(){return t.setState({mouseOverBullet:!0})},onMouseLeave:function(){return t.setState({mouseOverBullet:!1})},onClick:this.onBulletClick})}},{key:"renderList",value:function(){var e=this;return this.state.progressDetailList.map((function(t,a){return n.a.createElement(N.a,{key:t.label+a,direction:"row",flex:!1,margin:{vertical:"medium"}},n.a.createElement(N.a,null,e.renderProgressBullet(a)),n.a.createElement(N.a,{basis:"3/4"},n.a.createElement(U.a,{color:"white",margin:{left:"medium"}},t.label)),e.renderProgressInput(a))}))}},{key:"render",value:function(){return n.a.createElement(N.a,null,n.a.createElement(N.a,{margin:{vertical:"small"},height:{max:"small"},overflow:"auto"},this.renderList()),this.renderProgressDetailInput(),this.renderAddButton())}}]),t}(r.Component),Ee=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={previousSelcted:-1,showKeyResult:!1},a.onKeyResultSelect=function(e){a.state.currentSelected===e?(a.props.onKeyResultHide(),a.setState({showKeyResult:!a.state.showKeyResult,currentSelected:-1})):(a.props.onKeyResultShow(),a.setState({currentSelected:e,showKeyResult:!0}))},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"renderCurrentLog",value:function(e,t){return n.a.createElement(N.a,{animation:{type:"slideDown",duration:300},margin:{horizontal:"small"}},n.a.createElement(ye,{keyResult:e,keyResultIndex:t,progressDetailList:e.progressDetailList,onKeyResultUpdate:this.props.onKeyResultUpdate}))}},{key:"renderProgressLog",value:function(e,t){return this.state.showKeyResult&&this.state.currentSelected===t&&this.renderCurrentLog(e,t)}},{key:"renderSign",value:function(e){return this.state.currentSelected===e?n.a.createElement(ue.a,null):n.a.createElement(de.a,null)}},{key:"renderList",value:function(){var e=this;return this.props.keyResults.map((function(t,a){return n.a.createElement(N.a,{key:t.label+a,flex:!1,margin:{vertical:"small"}},n.a.createElement(N.a,{pad:{vertical:"medium"},onClick:function(){return e.onKeyResultSelect(a)}},n.a.createElement(N.a,{direction:"row",margin:{horizontal:"small"}},n.a.createElement(N.a,{basis:"3/4"},n.a.createElement(U.a,{color:"white"},t.label)),n.a.createElement(N.a,{margin:{right:"small"}},n.a.createElement(ne.a,{values:[{value:t.progress}]})),n.a.createElement(N.a,null,e.renderSign(a)))),e.renderProgressLog(t,a))}))}},{key:"render",value:function(){return n.a.createElement(N.a,null,this.renderList())}}]),t}(r.Component),ve=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={keyResults:[],keyResultLabel:"",cardBackground:"",isUpdate:!1,addKeyResult:!1,showAddButton:!0},a.calculateCardColor=function(){return"card-background-".concat(a.props.objectiveIndex%4+1)},a.saveFirestore=function(e,t){P.a.firestore().collection("userObjectives").doc(a.props.user.uid).collection("objectives").doc(t).update(e)},a.saveReduxStore=function(e){a.props.updateObjective(a.props.objectiveIndex,e)},a.onCloseModal=function(){if(a.state.isUpdate){var e=a.props.objective,t=e.id,r={id:t,label:e.label,progress:Math.floor(a.state.keyResults.reduce((function(e,t){return e+t.progress}),0)/a.state.keyResults.length),keyResults:a.state.keyResults};a.props.demo?a.props.updateDemo(a.props.objectiveIndex,r):(a.saveReduxStore(r),a.saveFirestore(r,t)),a.setState({isUpdate:!1})}a.props.onCardClose()},a.onKeyResultUpdate=function(e,t){a.setState({keyResults:[].concat(Object(u.a)(a.state.keyResults.slice(0,e)),[t],Object(u.a)(a.state.keyResults.slice(e+1))),isUpdate:!0})},a.onKeyResultShow=function(){a.setState({addKeyResult:!1,showAddButton:!1})},a.onKeyResultHide=function(){a.setState({addKeyResult:!1,showAddButton:!0})},a.onAddClick=function(){""!==a.state.keyResultLabel&&a.handleKeyResult(),a.setState({addKeyResult:!a.state.addKeyResult})},a.onKeyResultEnter=function(e){"Enter"===e.key&&""!==a.state.keyResultLabel&&a.handleKeyResult()},a.handleKeyResult=function(){var e={label:a.state.keyResultLabel,progress:0,progressDetailList:[]};a.setState({keyResults:[].concat(Object(u.a)(a.state.keyResults),[e]),isUpdate:!0}),a.setState({keyResultLabel:""})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState({keyResults:this.props.objective.keyResults,cardBackground:this.calculateCardColor()})}},{key:"renderAddButton",value:function(){return this.state.showAddButton&&n.a.createElement(F.a,{label:n.a.createElement(U.a,{color:"white"},"New Key Result"),icon:n.a.createElement(ce.a,{color:"white"}),color:"white",margin:{vertical:"medium",horizontal:"xlarge"},onClick:this.onAddClick})}},{key:"renderKeyResultInput",value:function(){var e=this;return this.state.addKeyResult&&n.a.createElement(ie.a,{placeholder:"Key Result",value:this.state.keyResultLabel,onChange:function(t){return e.setState({keyResultLabel:t.target.value})},onKeyDown:this.onKeyResultEnter})}},{key:"render",value:function(){return n.a.createElement(W.a,{onEsc:this.onCloseModal,onClickOutside:this.onCloseModal,margin:"xlarge",full:!0},n.a.createElement(N.a,{background:this.state.cardBackground,fill:!0},n.a.createElement(N.a,{direction:"row"},n.a.createElement(N.a,{basis:"3/4"},n.a.createElement(z.a,{color:"white",margin:{left:"medium"}},this.props.objective.label)),n.a.createElement(N.a,{basis:"1/4",justify:"center",align:"center",onClick:this.onCloseModal,hoverIndicator:!0},n.a.createElement(Y.a,{color:"white"}))),n.a.createElement(N.a,{margin:{horizontal:"large",top:"medium"}},n.a.createElement(N.a,{overflow:"auto",height:{max:"medium"},margin:{vertical:"small"}},n.a.createElement(Ee,{keyResults:this.state.keyResults,onKeyResultUpdate:this.onKeyResultUpdate,onKeyResultShow:this.onKeyResultShow,onKeyResultHide:this.onKeyResultHide})),this.renderKeyResultInput(),this.renderAddButton())))}}]),t}(r.Component),fe=Object(l.b)((function(e){return{user:e.user}}),(function(e){return Object(i.a)({updateObjective:v,updateDemo:C},e)}))(ve),je=function(e){var t=e.onCardClick;return n.a.createElement(N.a,{direction:"column",basis:"medium",margin:"medium",elevation:"small",animation:"fadeIn",background:"dark-3",onClick:t,hoverIndicator:"dark-2"},n.a.createElement(N.a,{pad:{horizontal:"medium",vertical:"large"}},n.a.createElement(z.a,null,n.a.createElement(ce.a,null),"New Objective")))};function Oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(a),!0).forEach((function(t){Object(me.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Re=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={objectiveLabel:"",keyResultLabel:"",keyResults:[],editHeading:!0,addKeyResult:!1,showAddButton:!1},a.saveReduxStore=function(e,t){a.props.addObjective(ke({id:t},e))},a.saveFirestore=function(e){var t=P.a.firestore().collection("userObjectives").doc(a.props.user.uid).collection("objectives").doc();return t.set(ke({id:t.id},e)),t.id},a.onCloseModal=function(){if(""!==a.state.objectiveLabel){var e=Math.floor(a.state.keyResults.reduce((function(e,t){return e+t.progress}),0)/a.state.keyResults.length),t={label:a.state.objectiveLabel,progress:e,keyResults:a.state.keyResults};if(a.props.demo)a.props.addDemo(t);else{var r=a.saveFirestore(t);a.saveReduxStore(t,r)}}a.props.onCardClose()},a.onKeyResultUpdate=function(e,t){a.setState({keyResults:[].concat(Object(u.a)(a.state.keyResults.slice(0,e)),[t],Object(u.a)(a.state.keyResults.slice(e+1)))})},a.onKeyResultShow=function(){a.setState({addKeyResult:!1,showAddButton:!1})},a.onKeyResultHide=function(){a.setState({addKeyResult:!1,showAddButton:!0})},a.onObjectiveChange=function(e){a.setState({objectiveLabel:e.target.value,showAddButton:""!==e.target.value})},a.onObjectiveEnter=function(e){"Enter"===e.key&&""!==a.state.objectiveLabel&&a.setState({editHeading:!1})},a.onKeyResultEnter=function(e){"Enter"===e.key&&""!==a.state.keyResultLabel&&a.handleKeyResult()},a.onAddClick=function(){""!==a.state.keyResultLabel&&a.handleKeyResult(),a.setState({addKeyResult:!a.state.addKeyResult})},a.handleKeyResult=function(){var e={label:a.state.keyResultLabel,progress:0,progressDetailList:[]};a.setState({keyResults:[].concat(Object(u.a)(a.state.keyResults),[e])}),a.setState({keyResultLabel:""})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"renderHeading",value:function(){return this.state.editHeading?n.a.createElement(ie.a,{placeholder:"Objective Title",value:this.state.objectiveLabel,onChange:this.onObjectiveChange,onKeyDown:this.onObjectiveEnter}):this.state.objectiveLabel}},{key:"renderAddButton",value:function(){return this.state.showAddButton&&n.a.createElement(F.a,{label:n.a.createElement(U.a,{color:"white"},"New Key Result"),icon:n.a.createElement(ce.a,{color:"white"}),color:"white",margin:{vertical:"medium",horizontal:"xlarge"},onClick:this.onAddClick})}},{key:"renderKeyResultInput",value:function(){var e=this;return this.state.addKeyResult&&n.a.createElement(ie.a,{placeholder:"Key Result",value:this.state.keyResultLabel,onChange:function(t){return e.setState({keyResultLabel:t.target.value})},onKeyDown:this.onKeyResultEnter})}},{key:"render",value:function(){var e=this;return n.a.createElement(W.a,{onEsc:this.onCloseModal,onClickOutside:this.onCloseModal,margin:"xlarge",full:!0},n.a.createElement(N.a,{background:"layout-background",fill:!0},n.a.createElement(N.a,{direction:"row"},n.a.createElement(N.a,{basis:"3/4"},n.a.createElement(z.a,{margin:{left:"medium"},onClick:function(){return e.setState({editHeading:!0})}},this.renderHeading())),n.a.createElement(N.a,{basis:"1/4",justify:"center",align:"center",onClick:this.onCloseModal,hoverIndicator:!0},n.a.createElement(Y.a,null))),n.a.createElement(N.a,{margin:{horizontal:"large",top:"medium"}},n.a.createElement(N.a,{overflow:"auto",height:{max:"medium"},margin:{vertical:"small"}},n.a.createElement(Ee,{keyResults:this.state.keyResults,onKeyResultUpdate:this.onKeyResultUpdate,onKeyResultShow:this.onKeyResultShow,onKeyResultHide:this.onKeyResultHide})),this.renderKeyResultInput(),this.renderAddButton())))}}]),t}(r.Component),we=Object(l.b)((function(e){return{user:e.user}}),(function(e){return Object(i.a)({addObjective:E,addDemo:w},e)}))(Re),Ce=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={showModal:!1,showNewModal:!1,selectedObjective:null,selectedIndex:null},a.openObjective=function(e,t){a.setState({showModal:!0,selectedObjective:t,selectedIndex:e})},a.closeObjective=function(){a.setState({showModal:!1,selectedObjective:null})},a.openNewObjective=function(){a.setState({showNewModal:!0})},a.closeNewObjective=function(){a.setState({showNewModal:!1})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"renderDemoCard",value:function(){var e=this;return this.props.demoObjectives.map((function(t,a){return n.a.createElement(le,{key:t.label+a,objective:t,objectiveIndex:a,onCardClick:e.openObjective,demo:e.props.demo})}))}},{key:"renderCard",value:function(){var e=this;return this.props.demo?this.renderDemoCard():this.props.objectives.map((function(t,a){return n.a.createElement(le,{key:t.id,objective:t,objectiveIndex:a,onCardClick:e.openObjective})}))}},{key:"renderNewCard",value:function(){return this.props.demo?this.props.demoObjectives.length<3&&n.a.createElement(je,{onCardClick:this.openNewObjective}):n.a.createElement(je,{onCardClick:this.openNewObjective})}},{key:"renderModal",value:function(){return this.state.showModal&&n.a.createElement(fe,{objective:this.state.selectedObjective,objectiveIndex:this.state.selectedIndex,onCardClose:this.closeObjective,demo:!!this.props.demo})||this.state.showNewModal&&n.a.createElement(we,{onCardClose:this.closeNewObjective,demo:!!this.props.demo})}},{key:"render",value:function(){return n.a.createElement(N.a,{direction:"row",margin:{vertical:"medium",horizontal:"large"},wrap:!0},this.renderCard(),this.renderModal(),this.renderNewCard())}}]),t}(r.Component),Se=Object(l.b)((function(e){return{objectives:e.objectives,demoObjectives:e.demoObjectives}}))(Ce),Le=a(97),De=a.n(Le),Pe=a(98),Me=a.n(Pe),Ke=function(){return n.a.createElement(N.a,{fill:"horizontal"},n.a.createElement(N.a,{margin:{vertical:"xlarge"},align:"center"},n.a.createElement(re.a,{src:De.a}),n.a.createElement(z.a,null,"2020 New Year Resolution with OKRs")),n.a.createElement(N.a,{margin:{vertical:"xlarge"},align:"center"},n.a.createElement(re.a,{src:Me.a}),n.a.createElement(N.a,null,n.a.createElement(z.a,null,"Objective - Where you want to go"),n.a.createElement(z.a,null,"Key Result - How you get there"))),n.a.createElement(N.a,{margin:{vertical:"xlarge"},fill:"horizontal"},n.a.createElement(z.a,{margin:{left:"large"}},"Let's try it"),n.a.createElement(Se,{demo:!0})))},Ie=function(){return n.a.createElement(ae,null,n.a.createElement(Ke,null))},Ae=function(e){var t=e.loading;return n.a.createElement(N.a,{direction:"row",margin:"medium",wrap:!0},n.a.createElement(N.a,{margin:{vertical:"xlarge"}},n.a.createElement(Z.SquareLoader,{color:"white",loading:t})))},xe=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"renderList",value:function(){return this.props.loading?n.a.createElement(Ae,{loading:this.props.loading}):n.a.createElement(Se,null)}},{key:"render",value:function(){return n.a.createElement(ae,null,this.renderList())}}]),t}(r.Component),Be=Object(l.b)((function(e){return{loading:e.loading}}))(xe),Ne=function(){return n.a.createElement(K.d,null,n.a.createElement(A,{path:"/",component:Ie,restricted:!0,exact:!0}),n.a.createElement(x,{path:"/dashboard",component:Be,exact:!0}))},Te=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).updateUserName=function(e){e.displayName||e.updateProfile({displayName:a.props.userName})},a.fetchFirestoreData=function(e){a.props.setLoading(!0),P.a.firestore().collection("userObjectives").doc(e.uid).collection("objectives").get().then((function(e){a.props.setLoading(!1),a.props.setObjectives(e.docs.map((function(e){return e.data()})))}))},P.a.initializeApp(M),P.a.analytics(),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;P.a.auth().onAuthStateChanged((function(t){t?(e.updateUserName(t),e.props.setUser(t),e.props.setDemo([]),e.fetchFirestoreData(t)):(e.props.setUser(null),e.props.setObjectives([]),e.props.setDemo([]))}))}},{key:"render",value:function(){return n.a.createElement(L.a,{full:!0},n.a.createElement(Ne,null))}}]),t}(r.Component),Ue=Object(l.b)((function(e){return{userName:e.userName}}),(function(e){return Object(i.a)({setUser:j,setObjectives:y,setLoading:k,setDemo:R},e)}))(Te),_e=Object(i.c)(d);s.a.render(n.a.createElement((function(){return n.a.createElement(l.a,{store:_e},n.a.createElement(c.a,null,n.a.createElement(Ue,null)))}),null),document.getElementById("root"))},97:function(e,t,a){e.exports=a.p+"static/media/dream_1.c51d0f10.png"},98:function(e,t,a){e.exports=a.p+"static/media/peak_mountain_3.2f016709.png"}},[[102,1,2]]]);
//# sourceMappingURL=main.0b1f2033.chunk.js.map